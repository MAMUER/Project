<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org" lang="ru-RU">
<head>
    <title>–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–ª—É–±–∞</title>
    <link rel="stylesheet" th:href="@{/css/admin.css}">
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <script src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js" type="module"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
    <link rel='stylesheet' href='https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
</head>

<body>
    <div class="admin-container">
        <header class="admin-header">
            <h1>–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–ª—É–±–∞: <span th:text="${club.clubName}">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–ª—É–±–∞</span></h1>
            <div class="header-actions">
                <a th:href="@{/admin/clubs}" class="back-button">‚Üê –ö —Å–ø–∏—Å–∫—É –∫–ª—É–±–æ–≤</a>
                <a th:href="@{/profile/staff/{id}(id=${staffId})}" class="back-button">–í –ø—Ä–æ—Ñ–∏–ª—å</a>
            </div>
        </header>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="stats-section">
            <div class="stat-card">
                <h3>üìà –î–æ—Å—Ç—É–ø–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è</h3>
                <p class="stat-value" th:text="${capabilities['totalAvailableExercises']} + ' –∏–∑ ' + ${capabilities['totalExercisesInDatabase']}">0 –∏–∑ 0</p>
            </div>
            <div class="stat-card">
                <h3>üéØ –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</h3>
                <p class="stat-value" th:if="${capabilities['totalExercisesInDatabase'] > 0}" 
                   th:text="${#numbers.formatDecimal((capabilities['totalAvailableExercises'] / capabilities['totalExercisesInDatabase']) * 100, 1, 2) + '%'}">0%</p>
                <p class="stat-value" th:if="${capabilities['totalExercisesInDatabase'] == 0}">0%</p>
            </div>
        </div>

        <!-- –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –ø–æ –≥—Ä—É–ø–ø–∞–º –º—ã—à—Ü -->
        <div class="section" th:if="${not #maps.isEmpty(capabilities['exercisesByMuscleGroup'])}">
            <h2>üí™ –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –ø–æ –≥—Ä—É–ø–ø–∞–º –º—ã—à—Ü</h2>
            <div class="muscle-group-grid">
                <div class="muscle-card" th:each="muscleGroup : ${capabilities['exercisesByMuscleGroup']}">
                    <h4 th:text="${muscleGroup.key}">–ì—Ä—É–ø–ø–∞ –º—ã—à—Ü</h4>
                    <p th:text="${muscleGroup.value} + ' —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π'">0 —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π</p>
                </div>
            </div>
        </div>
        <div class="section" th:if="${#maps.isEmpty(capabilities['exercisesByMuscleGroup'])}">
            <h2>üí™ –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –ø–æ –≥—Ä—É–ø–ø–∞–º –º—ã—à—Ü</h2>
            <p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –≥—Ä—É–ø–ø–∞—Ö –º—ã—à—Ü</p>
        </div>

        <!-- –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ -->
        <div class="section" th:if="${not #maps.isEmpty(capabilities['exercisesByDifficulty'])}">
            <h2>–£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –ø–æ —É—Ä–æ–≤–Ω—é —Å–ª–æ–∂–Ω–æ—Å—Ç–∏</h2>
            <div class="difficulty-grid">
                <div class="difficulty-card" th:each="difficulty : ${capabilities['exercisesByDifficulty']}">
                    <h4 th:text="'–£—Ä–æ–≤–µ–Ω—å ' + ${difficulty.key}">–£—Ä–æ–≤–µ–Ω—å 1</h4>
                    <p th:text="${difficulty.value} + ' —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π'">0 —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π</p>
                </div>
            </div>
        </div>
        <div class="section" th:if="${#maps.isEmpty(capabilities['exercisesByDifficulty'])}">
            <h2>–£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –ø–æ —É—Ä–æ–≤–Ω—é —Å–ª–æ–∂–Ω–æ—Å—Ç–∏</h2>
            <p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ —É—Ä–æ–≤–Ω—è–º —Å–ª–æ–∂–Ω–æ—Å—Ç–∏</p>
        </div>

        <!-- –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ -->
        <div class="section" th:if="${not #maps.isEmpty(capabilities['equipmentSummary'])}">
            <h2>–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –∫–ª—É–±–∞</h2>
            <div class="equipment-grid">
                <div class="equipment-card" th:each="item : ${capabilities['equipmentSummary']}">
                    <div class="equipment-icon">
                        <ion-icon name="barbell-outline"></ion-icon>
                    </div>
                    <div class="equipment-info">
                        <h3 th:text="${item.key}">–¢–∏–ø –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è</h3>
                        <p class="equipment-quantity" th:text="'–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: ' + ${item.value}">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 0</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="section" th:if="${#maps.isEmpty(capabilities['equipmentSummary'])}">
            <h2>–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –∫–ª—É–±–∞</h2>
            <p>–í –∫–ª—É–±–µ –Ω–µ—Ç –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è</p>
        </div>

        <!-- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ -->
        <div class="section" th:if="${recommendations != null and not #maps.isEmpty(recommendations)}">
            <h2>üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é</h2>
            <div class="recommendations-card">
                <div th:each="suggestion : ${recommendations['suggestions']}">
                    <p th:text="${suggestion}">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è</p>
                </div>
                <p th:if="${recommendations['unavailableExercisesCount'] > 0}" 
                   th:text="'–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π: ' + ${recommendations['unavailableExercisesCount']}">
                   –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π: 0
                </p>
            </div>
        </div>

        <!-- –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="debug-section">
            <h3>üîç –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
            <details>
                <summary>–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</summary>
                <div class="debug-data">
                    <h4>Capabilities:</h4>
                    <pre th:text="${capabilities != null ? capabilities.toString() : 'null'}">Capabilities data</pre>
                    
                    <h4>Recommendations:</h4>
                    <pre th:text="${recommendations != null ? recommendations.toString() : 'null'}">Recommendations data</pre>
                    
                    <h4>Club:</h4>
                    <pre th:text="${club != null ? club.toString() : 'null'}">Club data</pre>
                </div>
            </details>
        </div>
    </div>
</body>
</html>